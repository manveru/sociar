<div id="blog">
  <div id="sub_menu" class="clearfix">
    <?r if @user == user ?>
      #{ A '&larr; Jump to Dashboard', :href => @profile.to_url }
      #{ A 'Write a new post', :href => Rs(:new) }
    <?r else ?>
      #{ A "&larr; To #{h @profile.name}'s Profile", :href => @profile.to_url }
    <?r end ?>
    #{ A 'All posts', :href => R(BlogController, user.login) }
  </div>

  <div id="sidebar">
    <div id="avatar">
      <img src="#{@profile.avatar(150)}" alt="Avatar" />
    </div>

    <div id="history">
      <h3>Blog Post History</h3>
      <?r if @blogs.each{|post| ?>
        <div class="item">
          #{ A h(post.title), :href => R(BlogController, post.to_url) }
          <div class="ago">#{time_diff post.updated_at } ago.</div>
        </div>
      <?r }.empty? ?>
        #{h @profile.name} has not blogged yet
      <?r end ?>
    </div>
  </div>

  <h1>#{h @profile.name}'s Blog</h1>

  <?r if @blog ?>
    #{ render_template '_post.xhtml' }
  <?r else ?>
    <?r @blogs.each{|blog| @blog = blog ?>
      #{ render_template '_post.xhtml' }
    <?r } ?>
  <?r end ?>

</div>
