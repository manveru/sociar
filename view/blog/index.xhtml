<div id="blog">
  <div id="sub_menu">
    <?r if @user == user ?>
      #{ A '&larr; Jump to Dashboard', :href => user.to_url }
      #{ A 'Write a new post', :href => Rs(:new) }
    <?r else ?>
      #{ A "&larr; To #{h @profile.name}'s Profile", :href => R(ProfileController, :show, @user.login) }
    <?r end ?>
  </div>

  <h1>#{h @profile.name}'s Blog</h1>

  <div id="history">
    <h3>Blog Post History</h3>
    <?r if @blogs.each{|post| ?>
      <div class="item">
        #{ A h(post.title), :href => R(BlogController, post.to_url) }
        <div class="ago">Written about 1 month ago.</div>
      </div>
    <?r }.empty? ?>
      #{h @profile.name} has not blogged yet
    <?r end ?>
  </div>

  <?r if @blog ?>
    #{ render_template '_post.xhtml' }
  <?r else ?>
    <?r @blogs.each{|blog| @blog = blog ?>
      #{ render_template '_post.xhtml' }
    <?r } ?>
  <?r end ?>

</div>
